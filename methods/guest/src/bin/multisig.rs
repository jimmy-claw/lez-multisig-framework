#![no_main]

use nssa_core::program::{ProgramInput, read_nssa_inputs, write_nssa_outputs_with_chained_call};
use multisig_core::Instruction;

risc0_zkvm::guest::entry!(main);

fn main() {
    let (ProgramInput { pre_states, instruction }, instruction_words) =
        read_nssa_inputs::<Instruction>();

    let pre_states_clone = pre_states.clone();

    let (post_states, chained_calls) = multisig_program::process(&pre_states, &instruction);

    write_nssa_outputs_with_chained_call(
        instruction_words,
        pre_states_clone,
        post_states,
        chained_calls,
    );
}
